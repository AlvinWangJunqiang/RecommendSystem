#Introduction

#Related work

##数据处理

* **来源**
    一万名国内某著名财经新闻网站得用户一个月的全部浏览记录
* **数据格式**
    共有五个域：用户编号、新闻编号、访问页面的时间(Unix时间戳)、新闻标题、新闻正文，例如:
    |user_id|news_id|read_time|news_title|news_content|
    |-|-|-|-|
    |5218791|100648598|1394463264|消失前的马航370|【财新网】（实习记者葛菁）据新华社消息，马来西亚航空公司表示...|
    |5218791|100648802|1394463205|马航代表与乘客家属见面|3月9日，马来西亚航空公司代表在北京与马航客机失联事件的乘客家属见面。|

* **数据统计**
    * 浏览记录数目: **116,224条**
    * 数据集大小: **201M**
    * 用户数: **10,000**
    * 出现新闻数: **6183条**
* **训练集测试集划分**
    以3月20号为界限，前20天的数据(**83209条**)作为训练数据， 后10天的数据(**18995条**)作为测试数据。
* **数据集分隔、存储与读取**
    源数据大小达到了200M，如果直接在这些数据集上处理的话效率将相当低下。因此采用下列措施以提高算法的效率：
    1. 数据读取等处理采用[pandas][1](Python Data Analysis Library)，pandas是基于[numpy][2]的开源数据处理工具，提供了高效地操作大型数据集所需的工具；
    2. 由于数据集主要部分是新闻内容(200M存储空间中由180M是新闻内容占用)， 所以可以将数据集按各个域分隔， 并将有关联的数据结合形成表，做处理时只对相应数据表处理；
    3. 将抽取到的特征集合存储成文件，供下一步分析使用， 减少重复处理数据造成的性能影响。
    具体分隔成的数据子表如下:
    
    |表名|内容|作用|
    |-|-|-|
    |same_user|在测试集和训练集中同时出现过的用户的id|判断是新用户还是老用户以采取不同的推荐方案|
    |hot_user|阅读新闻最频繁的用户的id|按阅读频繁程度给用户权重|
    |new_id_time_table|将新闻id和对应的内容单独抽取出来|减少计算量和简化操作|
    |tran_user_id|测试集中出现过的用户|简化操作|
    |test_user_id|测试集中出现过的用户|简化操作|
    |testing_data_freq_dict|测试集中出现的新闻的关键词||
    |U2U_tags|用户相似度||
    |user_click_data|原始数据集||
    |user_feature|用户特征|计算用户间的相似度|
    |user_news|每个用户看过的新闻集|通过用户id快速查找其看过的新闻集|
    |user_time_test_table|测试集中用户id与点击时间|将点击时间作为用户登录时间，以此时间推荐最近热点新闻|


    他们存储在工程的data文件夹下

## 分词

1. **TF-IDF**
    [TF-IDF][3]是一种统计方法，用以评估一字词对于一个文件集或一个语料库中的其中一份文件的重要程度。字词的重要性随着它在文件中出现的次数成正比增加，但同时会随着它在语料库中出现的频率成反比下降。其计算公式如下：
    词频率：
    $$tf_{i,j}=\frac{n_{i,j}}{\sum_kn_{k,j}}$$
    表示词条在文档中出现的频率
    逆文档频率：$$idf_i = \log{\frac{|D|}{j:t_i\in{d_j}}}$$
    其中$|D|$为语料库中文件总数
    $$tfidf_{i,j}=tf_{i,j}\times{idf_i}$$
2. **文档特征提取**
    求出每个文档tf-idf值最高的前十个词作为该文档的特征，比较文档间相同特征词数目多少来量化任意两篇文章的相似度。
3. **用户特征提取**
    将测试集中用户浏览过的新闻的特征集中在一起排序，保留排名靠前的特征关键词作为用户的特征。
#Approach

##基于内容推荐
1. 通过结巴分词计算出前20天用户所看新闻的关键词，作为每个用户的喜好特征（profile）
2. 通过结巴分词计算后十天新闻的关键词，来表示每个新闻的特征
3. 如果后十天的用户在前二十天看过新闻（即已经知道此用户的喜好特征），根据用户的喜好特征与新闻特征相关性来推荐新闻给用户
4. 如果后十天的用户是新用户（冷启动问题）

##协同过滤推荐
#Experiments


  [1]: http://pandas.pydata.org/
  [2]: http://www.numpy.org/
  [3]: https://en.wikipedia.org/wiki/Tf%E2%80%93idf